# ü§ñ Telegram –ë–æ—Ç

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **aiogram 3.x**.

## üìã –ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –±–æ—Ç?

- ‚ú® –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞—Ä—Ç—ã –º—É–¥—Ä–æ—Å—Ç–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
- üé® –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–æ—Ç–µ `bot.py`)
- üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ `.env`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
–£–±–µ–¥–∏—Å—å, —á—Ç–æ —É —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.10+

```bash
python --version
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
cd /path/to/your/project
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

–ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ:
```bash
pip install aiogram python-dotenv gspread
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π Telegram
2. –ù–∞–π–¥–∏ –±–æ—Ç–∞ **@BotFather**
3. –ù–∞–ø–∏—à–∏ `/newbot` –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env` —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
BOT_TOKEN=123456789:ABCDefGHIjklmnoPQRstuvWXYZ-aBcDeFGhI
```

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç (–±–µ–∑ Google Sheets)**
```bash
python simple_bot.py
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π –±–æ—Ç —Å Google Sheets**
```bash
python bot.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ bot.py              # –ü–æ–ª–Ω—ã–π –±–æ—Ç —Å Google Sheets
‚îú‚îÄ‚îÄ simple_bot.py       # –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îî‚îÄ‚îÄ service_account.json # –ö–ª—é—á–∏ Google (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Google Sheets)
```

## üîß –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –±–æ—Ç–∞

### üì± simple_bot.py (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç Google Sheets
- –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```python
CARD_DATA = {
    "üòä –†–∞–¥–æ—Å—Ç—å": "–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞...",
    "üò¥ –£—Å—Ç–∞–ª–æ—Å—Ç—å": "–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞...",
    "üòç –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ": "–¢–≤–æ–π –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç –∑–¥–µ—Å—å!",  # ‚Üê –î–æ–±–∞–≤—å —Å—é–¥–∞
}
```

### üìä bot.py (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Google Sheets
- –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞
- –ù—É–∂–Ω–∞ Google Cloud –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Sheets:**
1. –°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –Ω–∞ Google Sheets —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "BotContent"
2. –î–æ–±–∞–≤—å –ª–∏—Å—Ç "Cards" —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: `state` –∏ `interpretation`
3. –°–∫–∞—á–∞–π JSON –∫–ª—é—á –∏–∑ Google Cloud Console
4. –ü–æ–ª–æ–∂–∏ —Ñ–∞–π–ª `service_account.json` —Ä—è–¥–æ–º —Å `bot.py`

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –•—ç–Ω–¥–ª–µ—Ä—ã (–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥)

```python
@router.message(CommandStart())  # –ö–æ–º–∞–Ω–¥–∞ /start
@router.message(F.text.in_(data.keys()))  # –ö–Ω–æ–ø–∫–∏
@router.message()  # –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞

```python
builder = ReplyKeyboardBuilder()
builder.add(KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 1"))
builder.add(KeyboardButton(text="–ö–Ω–æ–ø–∫–∞ 2"))
builder.adjust(2)  # 2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª `.env`
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å–∫—Ä–∏–ø—Ç

### –û—à–∏–±–∫–∞: "ModuleNotFoundError"
```bash
pip install -r requirements.txt
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤–µ—Ä–Ω—ã–π
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º!

–î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`:
```
.env
service_account.json
```

## üìñ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è aiogram](https://docs.aiogram.dev/)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Google Sheets API](https://developers.google.com/sheets/api)

## üí° –ò–¥–µ–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ (Stripe/YooKassa)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏ –ª–∞–π–∫–æ–≤
- [ ] –¢–∞–π–º–µ—Ä—ã –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

## üë®‚Äçüíª –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python
2. –£–±–µ–¥–∏—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. –ü–µ—Ä–µ—á–∏—Ç–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é aiogram

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
